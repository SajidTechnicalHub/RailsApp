<style>

/* Style the tab */
.tab {
  float: left;
  border: 1px solid #ccc;
  background-color: #f1f1f1;
  width: 25%;
  height: 100vh;
}

/* Style the buttons inside the tab */
.tab button {
  display: block;
  background-color: inherit;
  color: black;
  padding: 22px 16px;
  width: 100%;
  border: none;
  outline: none;
  text-align: left;
  cursor: pointer;
  transition: 0.3s;
  font-size: 17px;
}

/* Change background color of buttons on hover */
.tab button:hover {
  background-color: #ddd;
}

/* Create an active/current "tab button" class */
.tab button.active {
  background-color: #ccc;
}

/* Style the tab content */
.tabcontent {
  float: left;
  padding: 0px 12px;
  border: 1px solid #ccc;
  width: 75%;
  border-left: none;
  height: 100%;
  min-height: 100vh;
}
</style>

<style>
  body {
      background-color: #f9f9fa
  }

  .padding {
      padding: 3rem !important
  }

  .user-card-full {
      overflow: hidden
  }

  .card {
      border-radius: 5px;
      -webkit-box-shadow: 0 1px 20px 0 rgba(69, 90, 100, 0.08);
      box-shadow: 0 1px 20px 0 rgba(69, 90, 100, 0.08);
      border: none;
      margin-bottom: 30px
  }

  .m-r-0 {
      margin-right: 0px
  }

  .m-l-0 {
      margin-left: 0px
  }

  .user-card-full .user-profile {
      border-radius: 5px 0 0 5px
  }

  .bg-c-lite-green {
      background: -webkit-gradient(linear, left top, right top, from(#f29263), to(#ee5a6f));
      background: linear-gradient(to right, #ee5a6f, #f29263)
  }

  .user-profile {
      padding: 20px 0
  }

  .card-block {
      padding: 1.25rem
  }

  .m-b-25 {
      margin-bottom: 25px
  }

  .img-radius {
      border-radius: 5px
  }

  .card .card-block p {
      line-height: 25px
  }

  @media only screen and (min-width: 1400px) {
      p {
          font-size: 14px
      }
  }

  .card-block {
      padding: 1.25rem
  }

  .b-b-default {
      border-bottom: 1px solid #e0e0e0
  }

  .m-b-20 {
      margin-bottom: 20px
  }

  .p-b-5 {
      padding-bottom: 5px !important
  }

  .card .card-block p {
      line-height: 25px
  }

  .m-b-10 {
      margin-bottom: 10px
  }

  .text-muted {
      color: #919aa3 !important
  }

  .b-b-default {
      border-bottom: 1px solid #e0e0e0
  }

  .f-w-600 {
      font-weight: 600
  }

  .m-b-20 {
      margin-bottom: 20px
  }

  .m-t-40 {
      margin-top: 20px
  }

  .p-b-5 {
      padding-bottom: 5px !important
  }

  .m-b-10 {
      margin-bottom: 10px
  }

  .m-t-40 {
      margin-top: 20px
  }

  .user-card-full .social-link li {
      display: inline-block
  }

  .user-card-full .social-link li a {
      font-size: 20px;
      margin: 0 10px 0 0;
      -webkit-transition: all 0.3s ease-in-out;
      transition: all 0.3s ease-in-out
  }
</style>

<nav aria-label="breadcrumb">
  <ol class="breadcrumb">
    <li class="breadcrumb-item">
      <%= link_to 'Home', root_path %>
    </li>
    <li class="breadcrumb-item active" aria-current="page">User Dashboard</li>
  </ol>
</nav>
<div class="tab">
  <button class="tablinks" onclick="openCity(event, 'profile')" id="defaultOpen">My Profile</button>
  <% if user_signed_in? && current_user.status == 'moderator' %>
    <button class="tablinks" onclick="openCity(event, 'product')" id="defaultOpen">Ads Products</button>
    <button class="tablinks" onclick="openCity(event, 'category')" id="defaultOpen">Categories</button>
  <% end %>
  <button class="tablinks" onclick="openCity(event, 'order')"> Orders</button>
</div>

<div id="profile" class="tabcontent">

<div class="page-content page-container" id="page-content">
    <div class="padding">
        <div class="row container d-flex justify-content-center">
            <div class="col-xl-12 col-md-12">
                <div class="card user-card-full">
                    <div class="row m-l-0 m-r-0">
                        <div class="col-sm-4 bg-c-lite-green user-profile">
                            <div class="card-block text-center text-white">
                                <div class="m-b-25"> 
                                  <% if current_user.avatar.attached? %>
                                      <%= image_tag(current_user.avatar,{class:'dash-profile'})  %>
                                  <% else %>
                                       <%= image_tag("profile.png",{class:'dash-profile'}) %>
                                  <% end %>
                                 </div>
                                <h4 class="f-w-600"><%= "#{current_user.fname} #{current_user.lname}" %></h4>
                                <p class="text-capitalize"><span class="font-weight-bold">Status:</span> <%= current_user.status %></p> <i class=" mdi mdi-square-edit-outline feather icon-edit m-t-10 f-16"></i>
                                  <p>
                                  <%= link_to 'Edit Profile',  edit_user_registration_path, class:'nav-link text-white'  %>
                                </p>
                            </div>
                        </div>
                        <div class="col-sm-8">
                            <div class="card-block">
                                <h6 class="m-b-20 p-b-5 b-b-default f-w-600">Information</h6>
                                <div class="row">
                                    <div class="col-sm-6">
                                        <p class="m-b-10 f-w-600">Email</p>
                                        <h6 class="text-muted f-w-400"><%= current_user.email %></h6>
                                    </div>
                                    <div class="col-sm-6">
                                        <p class="m-b-10 f-w-600">Phone</p>
                                        <h6 class="text-muted f-w-400">0300-1234567</h6>
                                    </div>
                                </div>
                                <h6 class="m-b-20 m-t-40 p-b-5 b-b-default f-w-600">Projects</h6>
                                <div class="row">
                                    <div class="col-sm-6">
                                        <p class="m-b-10 f-w-600">Recent</p>
                                        <h6 class="text-muted f-w-400">Sam Disuja</h6>
                                    </div>
                                    <div class="col-sm-6">
                                        <p class="m-b-10 f-w-600">Most Viewed</p>
                                        <h6 class="text-muted f-w-400">Dinoter husainm</h6>
                                    </div>
                                </div>
                                <ul class="social-link list-unstyled m-t-40 m-b-10">
                                    <li><a href="#!" data-toggle="tooltip" data-placement="bottom" title="" data-original-title="facebook" data-abc="true"><i class="mdi mdi-facebook feather icon-facebook facebook" aria-hidden="true"></i></a></li>
                                    <li><a href="#!" data-toggle="tooltip" data-placement="bottom" title="" data-original-title="twitter" data-abc="true"><i class="mdi mdi-twitter feather icon-twitter twitter" aria-hidden="true"></i></a></li>
                                    <li><a href="#!" data-toggle="tooltip" data-placement="bottom" title="" data-original-title="instagram" data-abc="true"><i class="mdi mdi-instagram feather icon-instagram instagram" aria-hidden="true"></i></a></li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

</div>

<div id="product" class="tabcontent">
  <h3>Ads Products</h3>
  <p>All Products added by Moderator <%= current_user.email%>.</p>
  <div>
   
    <div class="card">
      <div class="card-body">
    <table class="table  table-hover ">
      <thead class="thead-light">
        <tr>
          <th>Product Image</th>
          <th>Product Name</th>
          <th>Moderator Name</th>
          <th colspan="3"></th>
        </tr>
      </thead>
      <tbody >
        <% @ads_products.each do |product| %>
          <tr >
            <td style="vertical-align: middle;">
              <% if product.avatar.attached? %>
                  <%= link_to image_tag(product.avatar, style:'max-width: 150px; and max-height: 150px;',class:"img-thumbnail"), product_path(product) %>
                <% end %>
            </td>
            <td style="vertical-align: middle;" ><%= product.name %></td>
            <td style="vertical-align: middle;" ><%= product.user.email %></td>
            <td style="vertical-align: middle;" ><%= link_to 'Show', product_path(product), class: 'btn btn-outline-info btn-sm' %></td>
              
            <td style="vertical-align: middle;" ><%= link_to 'Edit', edit_product_path(product), class: 'btn btn-outline-secondary btn-sm' %></td>
            <td style="vertical-align: middle;" ><%= link_to 'Delete', product_path(product), method: :delete, data: { confirm: 'Are you sure?' }, class: 'btn btn-outline-danger btn-sm' %></td>
            
        </tr>
        <% end %>
      </tbody>
    </table>
    </div>
      </div>

  </div>
</div>

<div id="category" class="tabcontent">
  <h3>All Categories</h3>
  <p>All Categories Added by Moderator <%= current_user.email%>.</p> 
  <div class="card">
    <div class="card-body">
  <table class="table  table-hover ">
    <thead class="thead-light">
      <tr>
        <th>Category Image</th>
        <th>Category Name</th>
        <th>Moderator Name</th>
        <th colspan="3"></th>
      </tr>
    </thead>
    <tbody >
      <% @categories.each do |cat| %>
        <tr >
          <td style="vertical-align: middle;">
            <% if cat.avatar.attached? %>
                <%= link_to image_tag(cat.avatar, style:'max-width: 150px; and max-height: 150px;',class:"img-thumbnail"), category_path(cat) %>
              <% end %>
          </td>
          <td style="vertical-align: middle;" ><%= cat.name %></td>
          <td style="vertical-align: middle;" ><%= cat.user.email %></td>
          <td style="vertical-align: middle;" ><%= link_to 'Show', category_path(cat), class: 'btn btn-outline-info btn-sm' %></td>
            
          <td style="vertical-align: middle;" ><%= link_to 'Edit', edit_category_path(cat), class: 'btn btn-outline-secondary btn-sm' %></td>
          <td style="vertical-align: middle;" ><%= link_to 'Delete', category_path(cat), method: :delete, data: { confirm: 'Are you sure?' }, class: 'btn btn-outline-danger btn-sm' %></td>
         
      </tr>
      <% end %>
    </tbody>
  </table>
  </div>
    </div>
</div>

<div id="order" class="tabcontent">
  <h3>Order Details</h3>
  <div class="card">
    <div class="card-body">
      <table class="table table-hover">
        <thead>
          <th>Order Number</th>
          <th>Order Item(s)</th>
          <th>Discount</th>
          <th>Total Bill</th>
          <th>Status</th>
          <th colspan="3"></th>
        </thead>
        <% @orders.each do |order| %>
          <tr>
            <td style="vertical-align: middle;"><%= order.id %></td>
            <td style="vertical-align: middle;"><%= order.total_items %></td>
            <td style="vertical-align: middle;"><%= order.discount %></td>
            <td style="vertical-align: middle;"><%= order.total %></td>
            <% if order.status == 'Paid' %>
              <td class="text-success text-uppercase" style="vertical-align: middle;"><%= order.status %></td>
            <% else %>
              <td class="text-warning text-uppercase" style="vertical-align: middle;"><%= order.status %></td>
            <% end %>
            <td style="vertical-align: middle;"><%= link_to 'Show', account_path(order), class: ' btn btn-outline-info btn-sm' %></td>
            <td style="vertical-align: middle;"><%= link_to 'Delete', account_path(order), method: :delete, data: { confirm: 'Are you sure?' }, class: 'btn btn-outline-danger btn-sm' %></td>
            <% if order.status == 'Unpaid' %>
              <td style="vertical-align: middle;"><%= button_to 'Order Now', checkouts_path(id:order.id), remote: true, class:'btn btn-outline-success btn-sm' %></td>
            <% end %>
          </tr>
        <% end %>
      </table>
    </div>
  </div>
</div>


<script>
function openCity(evt, cityName) {
  var i, tabcontent, tablinks;
  tabcontent = document.getElementsByClassName("tabcontent");
  for (i = 0; i < tabcontent.length; i++) {
    tabcontent[i].style.display = "none";
  }
  tablinks = document.getElementsByClassName("tablinks");
  for (i = 0; i < tablinks.length; i++) {
    tablinks[i].className = tablinks[i].className.replace(" active", "");
  }
  document.getElementById(cityName).style.display = "block";
  evt.currentTarget.className += " active";
}

// Get the element with id="defaultOpen" and click on it
document.getElementById("defaultOpen").click();
</script>