<style>

/* Style the tab */
.tab {
  float: left;
  border: 1px solid #ccc;
  background-color: #f1f1f1;
  width: 25%;
  height: 100vh;
}

/* Style the buttons inside the tab */
.tab button {
  display: block;
  background-color: inherit;
  color: black;
  padding: 22px 16px;
  width: 100%;
  border: none;
  outline: none;
  text-align: left;
  cursor: pointer;
  transition: 0.3s;
  font-size: 17px;
}

/* Change background color of buttons on hover */
.tab button:hover {
  background-color: #ddd;
}

/* Create an active/current "tab button" class */
.tab button.active {
  background-color: #ccc;
}

/* Style the tab content */
.tabcontent {
  float: left;
  padding: 0px 12px;
  border: 1px solid #ccc;
  width: 75%;
  border-left: none;
  height: 100%;
  min-height: 100vh;
}
</style>
<nav aria-label="breadcrumb">
  <ol class="breadcrumb">
    <li class="breadcrumb-item">
      <%= link_to 'Home', root_path %>
    </li>
    <li class="breadcrumb-item active" aria-current="page">User Dashboard</li>
  </ol>
</nav>
<div class="tab">
  <button class="tablinks" onclick="openCity(event, 'profile')" id="defaultOpen">My Profile</button>
  <% if user_signed_in? && current_user.status == 'moderator' %>
    <button class="tablinks" onclick="openCity(event, 'product')" id="defaultOpen">Ads Products</button>
    <button class="tablinks" onclick="openCity(event, 'category')" id="defaultOpen">Categories</button>
  <% end %>
  <button class="tablinks" onclick="openCity(event, 'order')"> Orders</button>
</div>

<div id="profile" class="tabcontent">
  <h3>Profile</h3>
  <p>profile details.</p>
</div>

<div id="product" class="tabcontent">
  <h3>Ads Products</h3>
  <p>All Products added by Moderator <%= current_user.email%>.</p>
  <div>
   
    <div class="card">
      <div class="card-body">
    <table class="table  table-hover ">
      <thead class="thead-light">
        <tr>
          <th>Product Image</th>
          <th>Product Name</th>
          <th>Moderator Name</th>
          <th colspan="3"></th>
        </tr>
      </thead>
      <tbody >
        <% @ads_products.each do |product| %>
          <tr >
            <td style="vertical-align: middle;">
              <% if product.avatar.attached? %>
                  <%= link_to image_tag(product.avatar, style:'max-width: 150px; and max-height: 150px;',class:"img-thumbnail"), product_path(product) %>
                <% end %>
            </td>
            <td style="vertical-align: middle;" ><%= product.name %></td>
            <td style="vertical-align: middle;" ><%= product.user.email %></td>
            <td style="vertical-align: middle;" ><%= link_to 'Show', product_path(product), class: 'btn btn-outline-info btn-sm' %></td>
              
            <td style="vertical-align: middle;" ><%= link_to 'Edit', edit_product_path(product), class: 'btn btn-outline-secondary btn-sm' %></td>
            <td style="vertical-align: middle;" ><%= link_to 'Delete', product_path(product), method: :delete, data: { confirm: 'Are you sure?' }, class: 'btn btn-outline-danger btn-sm' %></td>
            
        </tr>
        <% end %>
      </tbody>
    </table>
    </div>
      </div>

  </div>
</div>

<div id="category" class="tabcontent">
  <h3>All Categories</h3>
  <p>All Categories Added by Moderator <%= current_user.email%>.</p> 
  <div class="card">
    <div class="card-body">
  <table class="table  table-hover ">
    <thead class="thead-light">
      <tr>
        <th>Category Image</th>
        <th>Category Name</th>
        <th>Moderator Name</th>
        <th colspan="3"></th>
      </tr>
    </thead>
    <tbody >
      <% @categories.each do |cat| %>
        <tr >
          <td style="vertical-align: middle;">
            <% if cat.avatar.attached? %>
                <%= link_to image_tag(cat.avatar, style:'max-width: 150px; and max-height: 150px;',class:"img-thumbnail"), category_path(cat) %>
              <% end %>
          </td>
          <td style="vertical-align: middle;" ><%= cat.name %></td>
          <td style="vertical-align: middle;" ><%= cat.user.email %></td>
          <td style="vertical-align: middle;" ><%= link_to 'Show', category_path(cat), class: 'btn btn-outline-info btn-sm' %></td>
            
          <td style="vertical-align: middle;" ><%= link_to 'Edit', edit_category_path(cat), class: 'btn btn-outline-secondary btn-sm' %></td>
          <td style="vertical-align: middle;" ><%= link_to 'Delete', category_path(cat), method: :delete, data: { confirm: 'Are you sure?' }, class: 'btn btn-outline-danger btn-sm' %></td>
         
      </tr>
      <% end %>
    </tbody>
  </table>
  </div>
    </div>
</div>

<div id="order" class="tabcontent">
  <h3>Order Details</h3>
  <div class="card">
    <div class="card-body">
      <table class="table table-hover">
        <thead>
          <th>Order Number</th>
          <th>Order Item(s)</th>
          <th>Discount</th>
          <th>Total Bill</th>
          <th>Status</th>
          <th colspan="3"></th>
        </thead>
        <% @orders.each do |order| %>
          <tr>
            <td style="vertical-align: middle;"><%= order.id %></td>
            <td style="vertical-align: middle;"><%= order.total_items %></td>
            <td style="vertical-align: middle;"><%= order.discount %></td>
            <td style="vertical-align: middle;"><%= order.total %></td>
            <% if order.status == 'Paid' %>
              <td class="text-success text-uppercase" style="vertical-align: middle;"><%= order.status %></td>
            <% else %>
              <td class="text-warning text-uppercase" style="vertical-align: middle;"><%= order.status %></td>
            <% end %>
            <td style="vertical-align: middle;"><%= link_to 'Show', account_path(order), class: ' btn btn-outline-info btn-sm' %></td>
            <td style="vertical-align: middle;"><%= link_to 'Delete', account_path(order), method: :delete, data: { confirm: 'Are you sure?' }, class: 'btn btn-outline-danger btn-sm' %></td>
            <% if order.status == 'Unpaid' %>
              <td style="vertical-align: middle;"><%= button_to 'Order Now', checkouts_path(id:order.id), remote: true, class:'btn btn-outline-success btn-sm' %></td>
            <% end %>
          </tr>
        <% end %>
      </table>
    </div>
  </div>
</div>


<script>
function openCity(evt, cityName) {
  var i, tabcontent, tablinks;
  tabcontent = document.getElementsByClassName("tabcontent");
  for (i = 0; i < tabcontent.length; i++) {
    tabcontent[i].style.display = "none";
  }
  tablinks = document.getElementsByClassName("tablinks");
  for (i = 0; i < tablinks.length; i++) {
    tablinks[i].className = tablinks[i].className.replace(" active", "");
  }
  document.getElementById(cityName).style.display = "block";
  evt.currentTarget.className += " active";
}

// Get the element with id="defaultOpen" and click on it
document.getElementById("defaultOpen").click();
</script>